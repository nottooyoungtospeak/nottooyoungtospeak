 *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --blue: #5BAED6;
      --blue2: #7EC8E3;
      --blue3: #C8E8F5;
      --blue4: #EFF8FD;
      --pink: #E87EA1;
      --pink2: #F5A8C0;
      --pink3: #FCE4EE;
      --yellow: #F9D77E;
      --peach: #FBBF8C;
      --green: #7BC8A4;
      --green2: #D4F5E9;
      --lavender: #C3A8D1;
      --text: #3A3560;
      --textmid: #6B6490;
      --textlight: #9B97BA;
      --white: #FFFFFF;
      --offwhite: #F8F4FF;
    }

    html, body {
      min-height: 100vh;
      font-family: 'Nunito', sans-serif;
      background: linear-gradient(160deg, #EFF8FD 0%, #FFF0F6 50%, #FFF8E8 100%);
      color: var(--text);
      overflow-x: hidden;
    }

    /* BG DECORATION */
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 0;
      background:
        radial-gradient(ellipse 600px 400px at 5% 15%, rgba(91,174,214,0.14) 0%, transparent 70%),
        radial-gradient(ellipse 500px 300px at 95% 10%, rgba(232,126,161,0.13) 0%, transparent 70%),
        radial-gradient(ellipse 400px 300px at 50% 95%, rgba(249,215,126,0.12) 0%, transparent 70%);
      pointer-events: none;
    }

    .game-wrap {
      position: relative; z-index: 1;
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      padding: 2rem 1rem;
    }

    /* ── FLOATING PARTICLES ── */
    .particles { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
    .particle {
      position: absolute; border-radius: 50%;
      animation: particleDrift linear infinite;
      opacity: 0.5;
    }
    @keyframes particleDrift {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 0.6; }
      90% { opacity: 0.4; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    /* ── SCREEN BASE ── */
    .screen {
      display: none; width: 100%; max-width: 720px;
      animation: screenIn 0.5s ease forwards;
    }
    .screen.active { display: block; }
    @keyframes screenIn {
      from { opacity: 0; transform: translateY(20px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* ── CARD ── */
    .card {
      background: rgba(255,255,255,0.92);
      border-radius: 32px;
      padding: 3rem 3rem;
      box-shadow: 0 20px 60px rgba(91,174,214,0.18), 0 4px 16px rgba(232,126,161,0.1);
      border: 2px solid rgba(91,174,214,0.15);
      backdrop-filter: blur(12px);
      position: relative; overflow: hidden;
    }
    .card::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 6px;
      background: linear-gradient(to right, var(--blue), var(--pink), var(--yellow));
    }

    /* ══════════ SCREEN 1: START ══════════ */
    #start-screen { text-align: center; }

    .game-logo-wrap {
      margin-bottom: 1.5rem;
    }
    .game-logo-img {
      width: 160px; height: auto;
      filter: drop-shadow(0 8px 24px rgba(91,174,214,0.3));
      animation: logoFloat 3s ease-in-out infinite;
    }
    @keyframes logoFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .game-title {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(2.5rem, 7vw, 4rem); font-weight: 700;
      background: linear-gradient(135deg, var(--blue), var(--pink));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      line-height: 1.1; margin-bottom: 0.4rem;
    }
    .game-subtitle {
      font-size: 1rem; font-weight: 700; color: var(--textmid);
      letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.5rem;
    }
    .game-tagline {
      font-family: 'Dancing Script', cursive;
      font-size: 1.4rem; color: var(--blue); margin-bottom: 2rem;
    }
    .game-desc {
      font-size: 0.95rem; line-height: 1.8; color: var(--textmid);
      max-width: 500px; margin: 0 auto 2.5rem;
    }

    /* DIFFICULTY SELECT */
    .difficulty-row {
      display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; flex-wrap: wrap;
    }
    .diff-btn {
      padding: 0.6rem 1.5rem; border-radius: 50px; border: 2.5px solid transparent;
      font-family: 'Nunito', sans-serif; font-size: 0.85rem; font-weight: 800;
      cursor: pointer; transition: all 0.2s;
    }
    .diff-btn.easy { background: var(--green2); color: var(--green); border-color: var(--green); }
    .diff-btn.medium { background: var(--blue3); color: var(--blue); border-color: var(--blue); }
    .diff-btn.hard { background: var(--pink3); color: var(--pink); border-color: var(--pink); }
    .diff-btn.selected { transform: scale(1.08); box-shadow: 0 4px 14px rgba(0,0,0,0.12); }
    .diff-btn:hover { transform: scale(1.05); }

    .start-stats {
      display: flex; gap: 2rem; justify-content: center; margin-bottom: 2.5rem; flex-wrap: wrap;
    }
    .stat-pill {
      background: var(--offwhite); border-radius: 50px;
      padding: 0.6rem 1.4rem;
      font-size: 0.82rem; font-weight: 700; color: var(--textmid);
      display: flex; align-items: center; gap: 0.4rem;
      border: 1.5px solid rgba(91,174,214,0.2);
    }
    .stat-pill span { font-size: 1rem; }

    /* ══════════ BUTTONS ══════════ */
    .btn {
      display: inline-block; padding: 1rem 2.5rem; border-radius: 50px;
      font-family: 'Nunito', sans-serif; font-size: 1rem; font-weight: 800;
      letter-spacing: 0.05em; border: none; cursor: pointer; text-decoration: none;
      transition: all 0.25s;
    }
    .btn-blue {
      background: linear-gradient(135deg, var(--blue), var(--blue2));
      color: #fff; box-shadow: 0 6px 20px rgba(91,174,214,0.45);
    }
    .btn-blue:hover { transform: translateY(-3px); box-shadow: 0 12px 28px rgba(91,174,214,0.5); }
    .btn-pink {
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color: #fff; box-shadow: 0 6px 20px rgba(232,126,161,0.45);
    }
    .btn-pink:hover { transform: translateY(-3px); box-shadow: 0 12px 28px rgba(232,126,161,0.5); }
    .btn-outline {
      background: transparent; color: var(--blue);
      border: 2.5px solid var(--blue);
    }
    .btn-outline:hover { background: var(--blue3); }
    .btn-yellow {
      background: linear-gradient(135deg, var(--yellow), var(--peach));
      color: var(--text); box-shadow: 0 6px 20px rgba(249,215,126,0.5);
    }
    .btn-yellow:hover { transform: translateY(-3px); }
    .btn-sm { padding: 0.6rem 1.5rem; font-size: 0.85rem; }

    /* ══════════ SCREEN 2: QUIZ ══════════ */
    #quiz-screen .card { padding: 2.5rem; }

    /* TOP BAR */
    .quiz-topbar {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;
    }
    .quiz-progress-wrap { flex: 1; }
    .quiz-qnum {
      font-size: 0.75rem; font-weight: 700; color: var(--textlight);
      letter-spacing: 0.14em; text-transform: uppercase; margin-bottom: 0.4rem;
    }
    .progress-bar-bg {
      height: 10px; background: var(--offwhite); border-radius: 50px;
      overflow: hidden; border: 1.5px solid rgba(91,174,214,0.15);
    }
    .progress-bar-fill {
      height: 100%; border-radius: 50px;
      background: linear-gradient(to right, var(--blue), var(--pink));
      transition: width 0.5s ease;
    }

    .score-badge {
      background: linear-gradient(135deg, var(--yellow), var(--peach));
      border-radius: 50px; padding: 0.5rem 1.2rem;
      font-size: 0.9rem; font-weight: 800; color: var(--text);
      box-shadow: 0 3px 10px rgba(249,215,126,0.4);
      white-space: nowrap;
    }

    /* TIMER */
    .timer-wrap {
      display: flex; flex-direction: column; align-items: center; gap: 0.3rem;
    }
    .timer-circle {
      width: 56px; height: 56px; border-radius: 50%;
      background: conic-gradient(var(--blue) 0deg, var(--offwhite) 0deg);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.1rem; font-weight: 900; color: var(--text);
      position: relative; transition: background 0.1s;
      box-shadow: 0 4px 12px rgba(91,174,214,0.2);
    }
    .timer-circle::before {
      content: ''; position: absolute; inset: 5px; border-radius: 50%;
      background: white;
    }
    .timer-num { position: relative; z-index: 1; }
    .timer-label { font-size: 0.6rem; font-weight: 700; color: var(--textlight); text-transform: uppercase; letter-spacing: 0.1em; }

    /* CATEGORY TAG */
    .q-category {
      display: inline-flex; align-items: center; gap: 0.4rem;
      background: var(--blue3); border-radius: 50px;
      padding: 0.35rem 1rem; margin-bottom: 1rem;
      font-size: 0.72rem; font-weight: 700; color: var(--blue);
      letter-spacing: 0.1em; text-transform: uppercase;
    }

    /* QUESTION */
    .q-text {
      font-size: clamp(1rem, 2.5vw, 1.25rem); font-weight: 800;
      line-height: 1.5; color: var(--text); margin-bottom: 2rem;
    }

    /* ANSWER OPTIONS */
    .options-grid {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 1rem; margin-bottom: 1.5rem;
    }
    .option-btn {
      padding: 1.1rem 1.2rem; border-radius: 18px;
      border: 2.5px solid rgba(91,174,214,0.2);
      background: var(--offwhite);
      font-family: 'Nunito', sans-serif; font-size: 0.9rem; font-weight: 700;
      color: var(--text); cursor: pointer; text-align: left;
      transition: all 0.2s; line-height: 1.4;
      display: flex; align-items: flex-start; gap: 0.8rem;
    }
    .option-btn:hover:not(:disabled) {
      border-color: var(--blue); background: var(--blue3);
      transform: translateY(-2px); box-shadow: 0 6px 16px rgba(91,174,214,0.2);
    }
    .option-letter {
      width: 28px; height: 28px; min-width: 28px; border-radius: 50%;
      background: rgba(91,174,214,0.15); color: var(--blue);
      font-size: 0.78rem; font-weight: 900;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
    }
    .option-btn.correct {
      border-color: var(--green); background: var(--green2);
      animation: correctPop 0.4s ease;
    }
    .option-btn.correct .option-letter { background: var(--green); color: #fff; }
    .option-btn.wrong {
      border-color: var(--pink); background: var(--pink3);
      animation: wrongShake 0.4s ease;
    }
    .option-btn.wrong .option-letter { background: var(--pink); color: #fff; }
    .option-btn.reveal-correct {
      border-color: var(--green); background: var(--green2);
    }
    .option-btn.reveal-correct .option-letter { background: var(--green); color: #fff; }
    .option-btn:disabled { cursor: default; }

    @keyframes correctPop {
      0% { transform: scale(1); }
      50% { transform: scale(1.04); }
      100% { transform: scale(1); }
    }
    @keyframes wrongShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      75% { transform: translateX(6px); }
    }

    /* FEEDBACK */
    .feedback-box {
      padding: 1.2rem 1.5rem; border-radius: 16px;
      margin-bottom: 1.2rem; display: none;
      font-size: 0.9rem; font-weight: 700; line-height: 1.6;
      animation: fadeSlide 0.3s ease;
    }
    .feedback-box.correct-fb { background: var(--green2); color: #2a7a5a; border: 1.5px solid var(--green); }
    .feedback-box.wrong-fb { background: var(--pink3); color: #9a2a4a; border: 1.5px solid var(--pink2); }
    .feedback-box.active { display: block; }

    @keyframes fadeSlide {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .next-row { text-align: right; }

    /* STREAK BADGE */
    .streak-badge {
      display: none; position: fixed; top: 2rem; right: 2rem; z-index: 100;
      background: linear-gradient(135deg, var(--yellow), var(--peach));
      border-radius: 20px; padding: 1rem 1.5rem; text-align: center;
      box-shadow: 0 8px 30px rgba(249,215,126,0.5);
      animation: streakPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .streak-badge.show { display: block; }
    .streak-fire { font-size: 2rem; }
    .streak-text { font-size: 0.75rem; font-weight: 800; color: var(--text); text-transform: uppercase; letter-spacing: 0.1em; }
    @keyframes streakPop {
      from { opacity: 0; transform: scale(0.5) translateY(20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* ══════════ SCREEN 3: RESULTS ══════════ */
    #result-screen { text-align: center; }

    .result-trophy {
      font-size: 5rem; margin-bottom: 1rem;
      animation: trophyBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
    }
    @keyframes trophyBounce {
      from { transform: scale(0) rotate(-20deg); opacity: 0; }
      to { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    .result-title {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(2rem, 6vw, 3.5rem); font-weight: 700;
      background: linear-gradient(135deg, var(--blue), var(--pink));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }
    .result-msg { font-size: 1rem; color: var(--textmid); font-weight: 600; margin-bottom: 2rem; }

    .score-ring-wrap { display: flex; justify-content: center; margin-bottom: 2rem; }
    .score-ring {
      width: 160px; height: 160px; border-radius: 50%;
      background: conic-gradient(var(--blue) 0deg, var(--offwhite) 0deg);
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 8px 30px rgba(91,174,214,0.25);
      position: relative;
    }
    .score-ring::before {
      content: ''; position: absolute; inset: 14px; border-radius: 50%; background: white;
    }
    .score-ring-inner { position: relative; z-index: 1; text-align: center; }
    .score-big {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem; font-weight: 700; line-height: 1;
      background: linear-gradient(135deg, var(--blue), var(--pink));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .score-total { font-size: 0.75rem; font-weight: 700; color: var(--textlight); }

    .result-stats {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 2rem;
    }
    .r-stat {
      background: var(--offwhite); border-radius: 18px; padding: 1.2rem;
      border: 1.5px solid rgba(91,174,214,0.12);
    }
    .r-stat-num {
      font-family: 'Dancing Script', cursive; font-size: 2rem;
      background: linear-gradient(135deg, var(--blue), var(--pink));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .r-stat-label { font-size: 0.75rem; font-weight: 700; color: var(--textlight); text-transform: uppercase; letter-spacing: 0.08em; }

    .result-quote {
      background: linear-gradient(160deg, var(--blue3), var(--pink3));
      border-radius: 20px; padding: 2rem; margin-bottom: 2rem; text-align: left;
    }
    .result-quote-icon { font-size: 1.5rem; margin-bottom: 0.5rem; }
    .result-quote-text { font-family: 'Dancing Script', cursive; font-size: 1.4rem; color: var(--text); line-height: 1.4; margin-bottom: 0.5rem; }
    .result-quote-attr { font-size: 0.75rem; font-weight: 700; color: var(--textmid); text-transform: uppercase; letter-spacing: 0.12em; }

    .result-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }

    /* CONFETTI */
    .confetti-piece {
      position: fixed; top: -10px; z-index: 200;
      width: 10px; height: 10px; border-radius: 2px;
      animation: confettiFall linear forwards;
      pointer-events: none;
    }
    @keyframes confettiFall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    /* REVIEW MODAL */
    .modal-bg {
      display: none; position: fixed; inset: 0; z-index: 500;
      background: rgba(58,53,96,0.4); backdrop-filter: blur(6px);
      align-items: center; justify-content: center; padding: 1rem;
    }
    .modal-bg.open { display: flex; }
    .modal {
      background: white; border-radius: 28px; padding: 2.5rem;
      max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto;
      box-shadow: 0 24px 60px rgba(58,53,96,0.25);
      position: relative;
    }
    .modal-close {
      position: absolute; top: 1.2rem; right: 1.5rem;
      background: var(--pink3); border: none; border-radius: 50%;
      width: 36px; height: 36px; cursor: pointer; font-size: 1rem;
      color: var(--pink); font-weight: 900; display: flex; align-items: center; justify-content: center;
      transition: background 0.2s;
    }
    .modal-close:hover { background: var(--pink2); color: white; }
    .modal h2 {
      font-family: 'Dancing Script', cursive; font-size: 2rem; color: var(--text); margin-bottom: 1.5rem;
    }
    .review-item { margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1.5px solid var(--offwhite); }
    .review-item:last-child { border-bottom: none; margin-bottom: 0; }
    .review-q { font-size: 0.9rem; font-weight: 700; color: var(--text); margin-bottom: 0.5rem; }
    .review-your { font-size: 0.82rem; font-weight: 600; margin-bottom: 0.3rem; }
    .review-your.ok { color: var(--green); }
    .review-your.bad { color: var(--pink); }
    .review-correct { font-size: 0.82rem; font-weight: 700; color: var(--blue); }
    .review-explain { font-size: 0.8rem; color: var(--textmid); margin-top: 0.4rem; line-height: 1.6; }

    /* ══════════ RESPONSIVE ══════════ */
    @media (max-width: 600px) {
      .card { padding: 2rem 1.5rem; }
      .options-grid { grid-template-columns: 1fr; }
      .result-stats { grid-template-columns: 1fr 1fr; }
      .quiz-topbar { flex-direction: column; align-items: flex-start; }
    }
