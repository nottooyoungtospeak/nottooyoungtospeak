<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Speak Up! â€” Youth Quiz Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
  <link rel = "stylesheet"href="stylegroup22.css">
</head>
<body>

<div class="particles" id="particles"></div>

<div class="game-wrap">

  <!-- â•â• SCREEN 1: START â•â• -->
  <div class="screen active" id="start-screen">
    <div class="card">
      <div class="game-logo-wrap">
        <img src="logo.png" alt="Not Too Young To Speak" class="game-logo-img" onerror="this.style.display='none'"/>
      </div>
      <div class="game-title">Speak Up! ğŸ“£</div>
      <div class="game-subtitle">Youth Advocacy Quiz</div>
      <div class="game-tagline">âœ¦ Raise Your Voice. Be Heard. âœ¦</div>
      <p class="game-desc">Test your knowledge on youth rights, ageism, civic participation, and the power of speaking up! Every correct answer is a step toward a world where youth voices are heard. ğŸŒ¸</p>

      <p style="font-size:0.8rem;font-weight:700;color:var(--textlight);text-transform:uppercase;letter-spacing:0.15em;margin-bottom:0.8rem;">Choose Difficulty</p>
      <div class="difficulty-row">
        <button class="diff-btn easy selected" onclick="setDiff(this,'easy')">ğŸŒ± Easy</button>
        <button class="diff-btn medium" onclick="setDiff(this,'medium')">ğŸŒŸ Medium</button>
        <button class="diff-btn hard" onclick="setDiff(this,'hard')">ğŸ”¥ Hard</button>
      </div>

      <div class="start-stats">
        <div class="stat-pill"><span>â“</span> <span id="q-count-label">10 Questions</span></div>
        <div class="stat-pill"><span>â±ï¸</span> <span id="time-label">20 sec/question</span></div>
        <div class="stat-pill"><span>â­</span> Earn Stars</div>
      </div>

      <button class="btn btn-blue" onclick="startGame()" style="width:100%;font-size:1.1rem;">
        Let's Play! âœ¦
      </button>
    </div>
  </div>

  <!-- â•â• SCREEN 2: QUIZ â•â• -->
  <div class="screen" id="quiz-screen">
    <div class="card">
      <div class="quiz-topbar">
        <div class="quiz-progress-wrap">
          <div class="quiz-qnum" id="q-num-label">Question 1 of 10</div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progress-fill" style="width:10%"></div>
          </div>
        </div>
        <div class="timer-wrap">
          <div class="timer-circle" id="timer-circle">
            <span class="timer-num" id="timer-num">20</span>
          </div>
          <div class="timer-label">secs</div>
        </div>
        <div class="score-badge">â­ <span id="score-display">0</span></div>
      </div>

      <div class="q-category" id="q-category">ğŸ“š Category</div>
      <div class="q-text" id="q-text">Loading question...</div>

      <div class="options-grid" id="options-grid"></div>

      <div class="feedback-box" id="feedback-box"></div>

      <div class="next-row">
        <button class="btn btn-blue btn-sm" id="next-btn" onclick="nextQuestion()" style="display:none;">
          Next Question â†’
        </button>
      </div>
    </div>
  </div>

  <!-- â•â• SCREEN 3: RESULTS â•â• -->
  <div class="screen" id="result-screen">
    <div class="card">
      <div class="result-trophy" id="result-trophy">ğŸ†</div>
      <div class="result-title" id="result-title">Amazing!</div>
      <div class="result-msg" id="result-msg">You truly are Not Too Young To Speak!</div>

      <div class="score-ring-wrap">
        <div class="score-ring" id="score-ring">
          <div class="score-ring-inner">
            <div class="score-big" id="final-score-big">0</div>
            <div class="score-total" id="final-score-total">pts</div>
          </div>
        </div>
      </div>

      <div class="result-stats">
        <div class="r-stat">
          <div class="r-stat-num" id="r-correct">0</div>
          <div class="r-stat-label">âœ… Correct</div>
        </div>
        <div class="r-stat">
          <div class="r-stat-num" id="r-wrong">0</div>
          <div class="r-stat-label">âŒ Wrong</div>
        </div>
        <div class="r-stat">
          <div class="r-stat-num" id="r-streak">0</div>
          <div class="r-stat-label">ğŸ”¥ Best Streak</div>
        </div>
      </div>

      <div class="result-quote" id="result-quote">
        <div class="result-quote-icon">ğŸ’¬</div>
        <div class="result-quote-text" id="result-quote-text">"Your voice matters."</div>
        <div class="result-quote-attr">Not Too Young To Speak</div>
      </div>

      <div class="result-actions">
        <button class="btn btn-blue" onclick="restartGame()">Play Again ğŸ”„</button>
        <button class="btn btn-outline" onclick="openReview()">Review Answers ğŸ“‹</button>
      </div>
    </div>
  </div>

</div><!-- /game-wrap -->

<!-- STREAK BADGE -->
<div class="streak-badge" id="streak-badge">
  <div class="streak-fire" id="streak-fire">ğŸ”¥</div>
  <div class="streak-text" id="streak-text">3x Streak!</div>
</div>

<!-- REVIEW MODAL -->
<div class="modal-bg" id="modal-bg">
  <div class="modal">
    <button class="modal-close" onclick="closeReview()">âœ•</button>
    <h2>ğŸ“‹ Answer Review</h2>
    <div id="review-content"></div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUESTION BANK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const allQuestions = [
  // EASY
  {
    diff: 'easy',
    category: 'ğŸ“¢ Youth Rights',
    q: 'What does "ageism" mean in the context of youth advocacy?',
    opts: ['Respecting elders', 'Discriminating based on age', 'Voting rights for seniors', 'School age requirements'],
    ans: 1,
    exp: 'Ageism is discrimination based on age. For youth, this means having their ideas dismissed just because they are young.'
  },
  {
    diff: 'easy',
    category: 'ğŸ¤ Speaking Up',
    q: 'According to "Not Too Young To Speak," speaking up about societal issues is an act of...',
    opts: ['Rebellion', 'Civic duty', 'Disrespect', 'Immaturity'],
    ans: 1,
    exp: 'Advocating for change is an act of civic duty â€” it shows you care about your community and take responsibility seriously.'
  },
  {
    diff: 'easy',
    category: 'ğŸ“š Knowledge',
    q: 'What is the tagline of the "Not Too Young To Speak" advocacy?',
    opts: ['Youth First!', 'Raise Your Voice. Be Heard.', 'Speak Now or Never', 'Change Starts With You'],
    ans: 1,
    exp: '"Raise Your Voice. Be Heard." captures the mission of empowering youth to participate in civic discussions.'
  },
  {
    diff: 'easy',
    category: 'ğŸŒ Advocacy',
    q: 'Where is the "Not Too Young To Speak" advocacy based?',
    opts: ['Manila', 'Davao', 'Cebu', 'Iloilo'],
    ans: 2,
    exp: 'The advocacy is based in Cebu, Philippines, serving youth voices across the entire country.'
  },
  {
    diff: 'easy',
    category: 'ğŸ“± Platform',
    q: 'Which platform serves as the "Pulse Center" for the advocacy?',
    opts: ['Twitter/X', 'Instagram', 'TikTok', 'Facebook Page'],
    ans: 3,
    exp: 'The Facebook Page serves as the "Pulse Center" â€” hosting real-time polls, Youth Takes, and quote graphics.'
  },
  {
    diff: 'easy',
    category: 'ğŸ’¬ Dialogue',
    q: 'What dismissive phrase do youth advocates often hear when speaking up?',
    opts: ['"That\'s a great point!"', '"We need your help!"', '"You\'ll understand when you\'re older."', '"Please share more."'],
    ans: 2,
    exp: '"You\'ll understand when you\'re older" is a common dismissal that silences young voices. The advocacy challenges this mindset.'
  },
  {
    diff: 'easy',
    category: 'ğŸŒ¸ Values',
    q: 'Which of these is a core value of Not Too Young To Speak?',
    opts: ['Confrontation', 'Silence', 'Inclusion', 'Isolation'],
    ans: 2,
    exp: 'Inclusion is a core value â€” every young voice deserves to be heard regardless of background or economic status.'
  },
  {
    diff: 'easy',
    category: 'ğŸ“– Reference',
    q: 'Who wrote "Anti-Ageism: Breaking the Barriers of Youth Silencing"?',
    opts: ['Jose Rizal', 'J.M.G. Padigos', 'Andres Bonifacio', 'Apolinario Mabini'],
    ans: 1,
    exp: 'Padigos (2022) wrote this article sharing personal experiences of being dismissed despite leading successful projects.'
  },
  {
    diff: 'easy',
    category: 'ğŸ›ï¸ Civics',
    q: 'Young people are described as stakeholders of...',
    opts: ['The future only', 'The past', 'Today AND the future', 'Only their school'],
    ans: 2,
    exp: 'Youth are active stakeholders of today who will inherit the long-term consequences of current decisions â€” not just future leaders.'
  },
  {
    diff: 'easy',
    category: 'ğŸ’¡ Mission',
    q: 'What is the Vision of Not Too Young To Speak?',
    opts: ['More schools in Cebu', 'A society where youths speak freely without judgment', 'Lower voting age to 10', 'Youth-only government'],
    ans: 1,
    exp: 'The Vision is to see a society where youths are free to speak without being judged or discriminated against.'
  },
  // MEDIUM
  {
    diff: 'medium',
    category: 'ğŸ§  Critical Thinking',
    q: 'A student presents a climate policy idea at a town hall but is told "You\'re too young to understand politics." This is an example of...',
    opts: ['Good mentoring', 'Youth ageism', 'Civic education', 'Policy debate'],
    ans: 1,
    exp: 'This is youth ageism â€” dismissing an idea purely based on the speaker\'s age rather than the merit of the idea itself.'
  },
  {
    diff: 'medium',
    category: 'ğŸ“Š Platform',
    q: 'What type of content does the Official Website (Intellectual Hub) primarily host?',
    opts: ['Memes and videos', 'Long-form essays and advocacy explainers', 'Gaming content', 'Shopping deals'],
    ans: 1,
    exp: 'The website features long-form essays, youth-written articles, and advocacy explainers backed by data and research.'
  },
  {
    diff: 'medium',
    category: 'ğŸŒ Social Issues',
    q: 'Why is it important for youth to speak up about climate change NOW?',
    opts: ['It helps them pass science class', 'They will directly inherit the long-term consequences of today\'s decisions', 'Adults don\'t care about it', 'It makes them popular online'],
    ans: 1,
    exp: 'Youth will directly inherit the consequences of today\'s climate decisions, making their voices in this conversation essential and urgent.'
  },
  {
    diff: 'medium',
    category: 'ğŸ’¬ Rhetoric',
    q: 'Replacing the "rebellion" narrative with the "responsibility" framework means...',
    opts: ['Being quiet and obedient', 'Seeing civic engagement as duty, not defiance', 'Following only adult guidance', 'Avoiding all political topics'],
    ans: 1,
    exp: 'When youth advocacy is framed as civic responsibility rather than rebellion, it changes how society receives and values youth input.'
  },
  {
    diff: 'medium',
    category: 'ğŸ¤ Community',
    q: 'What is the dual-platform approach of Not Too Young To Speak designed to do?',
    opts: ['Sell merchandise', 'Bridge generational gaps and provide evidence-based space for youth discourse', 'Replace traditional media', 'Create a political party'],
    ans: 1,
    exp: 'The dual-platform approach bridges generational perspectives through Facebook (real-time dialogue) and the website (in-depth analysis).'
  },
  {
    diff: 'medium',
    category: 'ğŸ”¬ Research',
    q: 'What did Padigos (2022) argue in the anti-ageism article?',
    opts: ['Youth should wait their turn', 'Young people can lead and create change when given the chance', 'Adults are always right', 'Social media is harmful for youth'],
    ans: 1,
    exp: 'Padigos argued that ageism is a myth â€” young people have proven they can successfully lead projects and create meaningful community change.'
  },
  {
    diff: 'medium',
    category: 'âš–ï¸ Justice',
    q: 'What does social justice mean in the context of youth advocacy?',
    opts: ['Only adults having equal rights', 'Fair treatment and equal opportunities regardless of age', 'Young people ruling the government', 'Eliminating all age restrictions'],
    ans: 1,
    exp: 'Social justice in youth advocacy means ensuring fair treatment and equal opportunities â€” including the right to participate in civic life regardless of age.'
  },
  {
    diff: 'medium',
    category: 'ğŸ’ª Empowerment',
    q: 'Which action best shows a young person practicing civic empowerment?',
    opts: ['Staying silent in community meetings', 'Writing an evidence-based article about a local issue', 'Complaining on social media without solutions', 'Waiting for adults to solve problems'],
    ans: 1,
    exp: 'Writing evidence-based content about real issues demonstrates civic empowerment â€” combining voice with research and responsibility.'
  },
  // HARD
  {
    diff: 'hard',
    category: 'ğŸ”¥ Advanced',
    q: 'Which philosophical concept best describes treating youth dismissal as acceptable simply because it has "always been done that way"?',
    opts: ['Utilitarianism', 'Appeal to tradition fallacy', 'Social contract theory', 'Relativism'],
    ans: 1,
    exp: 'The "appeal to tradition" fallacy means accepting something as correct because it\'s traditional. Youth dismissal has long been normalized this way â€” but tradition doesn\'t equal correctness.'
  },
  {
    diff: 'hard',
    category: 'ğŸ›ï¸ Civic Theory',
    q: 'In democratic theory, what concept directly supports the idea that youth should have voice in decisions that affect them?',
    opts: ['Technocracy', 'Suffrage alone', 'Stakeholder participation principle', 'Meritocracy'],
    ans: 2,
    exp: 'The stakeholder participation principle holds that those who are affected by decisions have a legitimate right to participate in making them â€” this directly supports youth civic inclusion.'
  },
  {
    diff: 'hard',
    category: 'ğŸ§© Strategy',
    q: 'Why is a dual-platform strategy (social media + long-form website) more effective than using a single platform for youth advocacy?',
    opts: ['It costs more money', 'It reaches different audiences with both accessible and deep content simultaneously', 'Social media is more credible', 'Websites get more followers'],
    ans: 1,
    exp: 'Dual platforms maximize reach: social media captures attention and drives engagement, while the website provides depth and evidence â€” together they make the advocacy both accessible and credible.'
  },
  {
    diff: 'hard',
    category: 'ğŸŒ Global Context',
    q: 'The UN Convention on the Rights of the Child (Article 12) states that children have the right to...',
    opts: ['Vote in elections at age 12', 'Express their views freely in matters affecting them', 'Own property independently', 'Refuse schooling'],
    ans: 1,
    exp: 'Article 12 of the UNCRC guarantees children the right to express views freely on all matters affecting them â€” a foundational legal basis for youth advocacy worldwide.'
  },
  {
    diff: 'hard',
    category: 'ğŸ”¥ Advanced',
    q: 'What rhetorical technique is being used when an adult says "I was young once too, and I didn\'t know enough to speak on these issues"?',
    opts: ['Ethos building', 'Hasty generalization / false equivalence', 'Logical reasoning', 'Pathos appeal'],
    ans: 1,
    exp: 'This is a false equivalence â€” assuming their personal past experience applies universally to all youth. It\'s also a hasty generalization that ignores individual differences in knowledge and circumstance.'
  },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GAME STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let difficulty = 'easy';
let questions = [];
let currentQ = 0;
let score = 0;
let correctCount = 0;
let wrongCount = 0;
let streak = 0;
let bestStreak = 0;
let timer = null;
let timeLeft = 20;
let timeMax = 20;
let answered = false;
let userAnswers = [];

const diffSettings = {
  easy:   { time: 20, label: '20 sec/question', count: 10 },
  medium: { time: 15, label: '15 sec/question', count: 10 },
  hard:   { time: 10, label: '10 sec/question', count: 10 },
};

function setDiff(btn, d) {
  document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  difficulty = d;
  const s = diffSettings[d];
  document.getElementById('time-label').textContent = s.label;
  document.getElementById('q-count-label').textContent = s.count + ' Questions';
}

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function startGame() {
  // Filter by difficulty (easy always has enough, for medium/hard mix)
  let pool;
  if (difficulty === 'easy') {
    pool = allQuestions.filter(q => q.diff === 'easy');
  } else if (difficulty === 'medium') {
    pool = allQuestions.filter(q => q.diff === 'easy' || q.diff === 'medium');
  } else {
    pool = [...allQuestions];
  }
  questions = shuffle(pool).slice(0, 10);
  currentQ = 0; score = 0; correctCount = 0; wrongCount = 0;
  streak = 0; bestStreak = 0; userAnswers = [];
  timeMax = diffSettings[difficulty].time;
  document.getElementById('score-display').textContent = '0';
  showScreen('quiz-screen');
  renderQuestion();
}

function renderQuestion() {
  answered = false;
  const q = questions[currentQ];
  const total = questions.length;

  document.getElementById('q-num-label').textContent = `Question ${currentQ + 1} of ${total}`;
  document.getElementById('progress-fill').style.width = `${((currentQ + 1) / total) * 100}%`;
  document.getElementById('q-category').textContent = q.category;
  document.getElementById('q-text').textContent = q.q;
  document.getElementById('next-btn').style.display = 'none';
  document.getElementById('feedback-box').className = 'feedback-box';

  const grid = document.getElementById('options-grid');
  grid.innerHTML = '';
  const letters = ['A', 'B', 'C', 'D'];
  q.opts.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.innerHTML = `<span class="option-letter">${letters[i]}</span><span>${opt}</span>`;
    btn.onclick = () => selectAnswer(i, btn);
    grid.appendChild(btn);
  });

  startTimer();
}

function startTimer() {
  clearInterval(timer);
  timeLeft = timeMax;
  updateTimerUI();
  timer = setInterval(() => {
    timeLeft--;
    updateTimerUI();
    if (timeLeft <= 0) {
      clearInterval(timer);
      timeOut();
    }
  }, 1000);
}

function updateTimerUI() {
  const num = document.getElementById('timer-num');
  const circle = document.getElementById('timer-circle');
  num.textContent = timeLeft;
  const pct = (timeLeft / timeMax) * 360;
  let color = timeLeft > timeMax * 0.5 ? '#5BAED6' : timeLeft > timeMax * 0.25 ? '#F9D77E' : '#E87EA1';
  circle.style.background = `conic-gradient(${color} ${pct}deg, #F8F4FF ${pct}deg)`;
}

function timeOut() {
  if (answered) return;
  answered = true;
  streak = 0;
  wrongCount++;
  userAnswers.push({ q: questions[currentQ], chosen: -1, correct: false });
  const q = questions[currentQ];
  const btns = document.querySelectorAll('.option-btn');
  btns.forEach(b => b.disabled = true);
  btns[q.ans].classList.add('reveal-correct');
  showFeedback(false, "â° Time's up! " + q.exp);
  document.getElementById('next-btn').style.display = 'inline-block';
}

function selectAnswer(idx, btn) {
  if (answered) return;
  answered = true;
  clearInterval(timer);

  const q = questions[currentQ];
  const isCorrect = idx === q.ans;
  const btns = document.querySelectorAll('.option-btn');
  btns.forEach(b => b.disabled = true);

  if (isCorrect) {
    btn.classList.add('correct');
    streak++;
    correctCount++;
    if (streak > bestStreak) bestStreak = streak;
    const bonus = Math.ceil(timeLeft / timeMax * 50);
    const pts = 100 + bonus;
    score += pts;
    document.getElementById('score-display').textContent = score;
    showFeedback(true, `âœ… Correct! +${pts} pts ğŸ‰ ${q.exp}`);
    if (streak >= 3) showStreak(streak);
    userAnswers.push({ q, chosen: idx, correct: true });
  } else {
    btn.classList.add('wrong');
    btns[q.ans].classList.add('reveal-correct');
    streak = 0;
    wrongCount++;
    showFeedback(false, `âŒ Not quite! ${q.exp}`);
    userAnswers.push({ q, chosen: idx, correct: false });
  }

  document.getElementById('next-btn').style.display = 'inline-block';
}

function showFeedback(correct, text) {
  const fb = document.getElementById('feedback-box');
  fb.textContent = text;
  fb.className = 'feedback-box ' + (correct ? 'correct-fb' : 'wrong-fb') + ' active';
}

function showStreak(n) {
  const badge = document.getElementById('streak-badge');
  const fires = ['','','','ğŸ”¥','ğŸ”¥ğŸ”¥','ğŸ”¥ğŸ”¥ğŸ”¥','âš¡ğŸ”¥âš¡'];
  document.getElementById('streak-fire').textContent = fires[Math.min(n, 6)] || 'ğŸ”¥';
  document.getElementById('streak-text').textContent = `${n}x Streak!`;
  badge.className = 'streak-badge show';
  setTimeout(() => badge.className = 'streak-badge', 2500);
}

function nextQuestion() {
  currentQ++;
  if (currentQ >= questions.length) {
    showResults();
  } else {
    showScreen('quiz-screen');
    renderQuestion();
  }
}

function showResults() {
  showScreen('result-screen');

  document.getElementById('final-score-big').textContent = score;
  document.getElementById('final-score-total').textContent = 'points';
  document.getElementById('r-correct').textContent = correctCount;
  document.getElementById('r-wrong').textContent = wrongCount;
  document.getElementById('r-streak').textContent = bestStreak;

  const pct = correctCount / questions.length;
  const ring = document.getElementById('score-ring');
  const deg = pct * 360;
  ring.style.background = `conic-gradient(#5BAED6 ${deg}deg, #F8F4FF ${deg}deg)`;

  // Trophy & message
  const trophies = ['ğŸ˜¢','ğŸ˜…','ğŸ™‚','ğŸ˜Š','â­','ğŸŒŸ','ğŸ…','ğŸ¥‡','ğŸ†','ğŸ–ï¸','ğŸŠ'];
  const idx = Math.floor(pct * 10);
  document.getElementById('result-trophy').textContent = trophies[Math.min(idx, 10)];

  const titles = ['Keep Trying!','You Can Do It!','Getting There!','Not Bad!','Well Done!','Great Job!','Excellent!','Outstanding!','Amazing!','Perfect!','Legendary!'];
  document.getElementById('result-title').textContent = titles[Math.min(idx, 10)] + (pct === 1 ? ' ğŸ‰' : '');

  const msgs = [
    "Keep learning â€” your voice grows stronger with knowledge! ğŸ“š",
    "Every expert was once a beginner. Keep speaking up! ğŸ’ª",
    "You're on your way! Your advocacy journey has begun. ğŸŒ±",
    "Good effort! A few more reads and you'll ace it. âœ¨",
    "You know your stuff! Keep amplifying youth voices. ğŸ“£",
    "Impressive! You're clearly passionate about this cause. ğŸŒ¸",
    "Excellent knowledge! You'd be a great advocate. ğŸŒŸ",
    "Wow! Your understanding of youth rights is deep. â­",
    "Amazing! You are truly Not Too Young To Speak! ğŸ†",
    "Perfect score! You're a youth advocacy champion! ğŸŠ",
    "LEGENDARY! You ARE the voice of the youth! ğŸ”¥âœ¨",
  ];
  document.getElementById('result-msg').textContent = msgs[Math.min(idx, 10)];

  const quotes = [
    { t: '"The youth of today are the leaders of tomorrow."', a: 'Nelson Mandela' },
    { t: '"You are never too young to lead. You are never too young to change the world."', a: 'Not Too Young To Speak' },
    { t: '"Raise your voice. Be heard. Your perspective matters."', a: 'Not Too Young To Speak' },
    { t: '"Taking an interest in societal issues is an act of civic duty, not an act of defiance."', a: 'NTTYS Advocacy' },
    { t: '"When given the chance, young people can lead, inspire, and create meaningful change."', a: 'Padigos, 2022' },
  ];
  const rq = quotes[Math.floor(Math.random() * quotes.length)];
  document.getElementById('result-quote-text').textContent = rq.t;
  document.querySelector('.result-quote-attr').textContent = 'â€” ' + rq.a;

  if (pct >= 0.7) launchConfetti();
}

function launchConfetti() {
  const colors = ['#5BAED6','#E87EA1','#F9D77E','#7BC8A4','#C3A8D1','#FBBF8C'];
  for (let i = 0; i < 60; i++) {
    setTimeout(() => {
      const c = document.createElement('div');
      c.className = 'confetti-piece';
      c.style.left = Math.random() * 100 + 'vw';
      c.style.background = colors[Math.floor(Math.random() * colors.length)];
      c.style.width = (Math.random() * 10 + 6) + 'px';
      c.style.height = (Math.random() * 10 + 6) + 'px';
      c.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
      c.style.animationDuration = (Math.random() * 2 + 2) + 's';
      c.style.animationDelay = '0s';
      document.body.appendChild(c);
      setTimeout(() => c.remove(), 4000);
    }, i * 40);
  }
}

function openReview() {
  const content = document.getElementById('review-content');
  const letters = ['A', 'B', 'C', 'D'];
  content.innerHTML = userAnswers.map((ua, i) => {
    const chosen = ua.chosen === -1 ? 'No answer (time out)' : `${letters[ua.chosen]}: ${ua.q.opts[ua.chosen]}`;
    const correct = `${letters[ua.q.ans]}: ${ua.q.opts[ua.q.ans]}`;
    return `
      <div class="review-item">
        <div class="review-q">${i + 1}. ${ua.q.q}</div>
        <div class="review-your ${ua.correct ? 'ok' : 'bad'}">
          ${ua.correct ? 'âœ…' : 'âŒ'} Your answer: ${chosen}
        </div>
        ${!ua.correct ? `<div class="review-correct">âœ”ï¸ Correct: ${correct}</div>` : ''}
        <div class="review-explain">ğŸ’¡ ${ua.q.exp}</div>
      </div>
    `;
  }).join('');
  document.getElementById('modal-bg').className = 'modal-bg open';
}

function closeReview() { document.getElementById('modal-bg').className = 'modal-bg'; }

function restartGame() { showScreen('start-screen'); }

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  // Force reflow for animation
  const el = document.getElementById(id);
  el.classList.remove('active');
  void el.offsetWidth;
  el.classList.add('active');
}

// â”€â”€ FLOATING PARTICLES â”€â”€
function createParticles() {
  const container = document.getElementById('particles');
  const colors = ['#5BAED6','#E87EA1','#F9D77E','#7BC8A4','#C3A8D1'];
  const emojis = ['â­','ğŸŒ¸','âœ¦','ğŸ’«','ğŸŒŸ'];
  for (let i = 0; i < 18; i++) {
    const p = document.createElement('div');
    const isEmoji = Math.random() > 0.6;
    if (isEmoji) {
      p.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      p.style.cssText = `
        position: absolute;
        left: ${Math.random() * 100}%;
        font-size: ${Math.random() * 14 + 10}px;
        animation: particleDrift ${Math.random() * 12 + 10}s ${Math.random() * -15}s linear infinite;
        opacity: 0.4;
      `;
    } else {
      p.className = 'particle';
      p.style.cssText = `
        left: ${Math.random() * 100}%;
        width: ${Math.random() * 10 + 4}px;
        height: ${Math.random() * 10 + 4}px;
        background: ${colors[Math.floor(Math.random() * colors.length)]};
        animation-duration: ${Math.random() * 12 + 10}s;
        animation-delay: ${Math.random() * -15}s;
      `;
    }
    container.appendChild(p);
  }
}

createParticles();
</script>
</body>

</html>
